<html>
<head>
  <meta charset="UTF-8">
  <title>html5</title>
</head>
<canvas id="canvas" width="800" height="400"></canvas>
<script>
  var canvas = document.getElementById('canvas');
  var ctx = canvas.getContext('2d');
  var cx=1;
  var cy=1;
  var col = ['#000', '#00f', '#f00', '#f0f', '#0f0','#0ff','#ff0','#fff'];

  ctx.font = "96px serif";
  ctx.strokeText("Hello world", 10, 100);

  var loop = function(){
      tile(col[randint(0, 8)], randint(0, 790), randint(0, 390), 10);
  };

  setInterval(loop, 100);
/*
  canvas.addEventListener('mouseup', onMouseUp, false);

function onMouseUp() {
    var mousePos = getMousePosition(canvas, evt);
    for (var i = 0; i < 100; i++) {
        tile(col[randint(0, 8)], randint(0, 790), randint(0, 390));
    }
    //alert("ha");
    alert(mousePos.x);
}
*/
canvas.addEventListener("mouseup", (e) => {
    var rect = e.target.getBoundingClientRect()
    var x = e.clientX - rect.left
    var y = e.clientY - rect.top
    tile(col[randint(0, 8)], x, y, 100);
    //console.log(`${x}:${y}`)
});


function randint(min, max) {
  return parseInt(Math.random() * (max - min) + min);
}

function tile(c, x, y, size){
    ctx.fillStyle = c;
    ctx.beginPath();
    ctx.moveTo(x, y);
    ctx.lineTo(x+size, y);
    ctx.lineTo(x+size, y+size);
    ctx.lineTo(x, y+size);
    ctx.closePath();
    ctx.fill();
}
function sound()
{
	var id = 'sound-file' ;
	if( typeof( document.getElementById( id ).currentTime ) != 'undefined' )
	{
		document.getElementById( id ).currentTime = 0;
	}
	document.getElementById( id ).play() ;
}
</script>
<form>
<input type="button" value="é‰„" onclick="sound()">
<audio id="sound-file" preload="auto">
	<source src="./iron.wav" type="audio/wav">
</audio>
</form>
</html>
